$(document).ready(function(){function e(){m=g.width(),_=g.height(),tabletUp=m>769?!0:!1,x=m>1025?!0:!1,z=m>1220?!0:!1}function t(){u=g.scrollTop(),p.toggleClass("mason--header-mini",u>300);var e,t,a;u>0&&x?(e=u/2,t=u/1e3):(e=0,t=0),a=z?u-1.2*u:0,h.css({"-webkit-transform":"translateY("+e+"px)","-moz-transform":"translateY("+e+"px)",transform:"translateY("+e+"px)",opacity:1-t}),w&&S.css({"-webkit-transform":"translateY("+a+"px)","-moz-transform":"translateY("+a+"px)",transform:"translateY("+a+"px)"}),l()}function a(){function e(){n.panBy(0,-20)}{var t=document.getElementById("map"),a=new google.maps.LatLng(t.getAttribute("data-lat"),t.getAttribute("data-lng")),o={zoom:14,center:a,disableDefaultUI:!0,scrollwheel:!1,backgroundColor:"#e5e3df"},n=new google.maps.Map(t,o);new google.maps.Marker({position:a,map:n,title:"Discovery Academy",icon:"/_site/images/design/icon_pin.png",animation:google.maps.Animation.DROP})}e(),g.resize(function(){setTimeout(function(){n.setCenter(a),e()},100)})}function o(e,t,a,o){for(var n=$(e),i=0;i<n.length;i+=t)n.slice(i,i+t).wrapAll(a).stop();o()}function n(e,t,a){p.hasClass(e)&&setTimeout(function(){$(a).children('option[value="'+$(t).val()+'"]').prop("selected",!0)},1e3)}function i(e,t){var a=0;$el=$(e),$el.css("height","auto"),setTimeout(function(){$el.each(function(){$this=$(this),thisHeight=$this.outerHeight(),thisHeight>a&&(a=thisHeight)}),$el.css("height",a+"px"),t()},200)}function s(e){var t=new Image,a=$(".videoplayer__img");t.src=a.data("image"),$(t).on("load",function(){t.width<100&&a.css("background-image","url("+t.src.replace("maxresdefault","0")+")")}),e()}function l(){$(".bg-lazy").each(function(){var e=$(this),t=e.offset().top;u+_+200>t&&e.removeClass("bg-lazy").css("background-image","url("+e.data("bg")+")")})}function r(){var e=$.cookie("urgent"),t=$(".urgent__close").data("cookie");(e!==t||void 0===e)&&p.addClass("urgent--show")}function c(){function e(e){var t=e.item.index,a=$(".staff__overlay__item ").eq(t),o=a.data("id");f(o)}V.owlCarousel({margin:140,dots:!0,nav:!1,responsive:{0:{items:1}},dragEndSpeed:400,onTranslated:e}),$(".nano").nanoScroller({alwaysVisible:!0})}function f(e){staffImg=$('.staff__item[data-id="'+e+'"]').attr("data-image"),void 0===staffOverlayContentArray[e]&&(staffOverlayContentArray[e]="loading",$.ajax({type:"POST",data:{staffID:e},url:"/_site/custom/ajaxStaff.asp",success:function(t){staffOverlayContentArray[e]=t;var a=$(".staff__overlay__item[data-id="+e+"]");a.addClass("loaded").find(".staff__overlay__text__load").append(t),""!==staffImg&&a.find(".staff__overlay__img").css("background-image","url("+staffImg+")"),a.find(".nano").nanoScroller({alwaysVisible:!0})},failure:function(){}}))}function d(){(w||C)&&D.css("height","auto").css("height",$(".staff__owl").outerHeight())}var u,m,_,g=$(window),p=$(".mason"),v=$("html, body"),h=$(".hero__slideshow"),w=($("#map"),!1),y=!1,C=!1,b=!1,k=!1,x=!1,z=!1;if($("html").hasClass("lte-ie8")||(b=!0),p.hasClass("mason--home")){w=!0,$staffOwl=$(".staff__owl");var S=$(".feeds__module--1");if(showVideo){var F=$(".videoplayer"),A=$("#video__player");$(".video__sizer")}}if(p.hasClass("mason--staff")){C=!0;{$(".staff")}}if(p.hasClass("mason--demo")&&(y=!0),e(),g.on("load",function(){b&&(d(),t())}),g.on("debouncedresize",function(){b&&(d(),e(),t())}),g.on("scroll",function(){b&&t()}),$("ul.hero__slideshow").cycle({speed:1e3,timeout:8e3,random:!0,slides:"> li",loader:!0,progressive:heroSlides,log:!1}),$("ul.hero__slideshow").on("cycle-before",function(){var e=$(".hero__slideshow__item.notresized:eq(0)"),t=e.children("img");e.hasClass("notresized")&&(resizeImage(t,$(t.attr("data-fill"))),e.removeClass("notresized"))}),w){$(".twitter__owl").owlCarousel({margin:0,dots:!1,nav:!1,responsive:{0:{items:1}},loop:!0,autoplay:!0,autoplayTimeout:7e3,autoplayHoverPause:!0,autoplaySpeed:1e3,dragEndSpeed:400}),o(".events__item",2,"<div class='owl__group__wrap'></div>",function(){var e=$(".events__owl");e.owlCarousel({margin:60,dots:!1,nav:!1,responsive:{0:{items:1},900:{items:2},1220:{items:1}},dragEndSpeed:400}),$(".events--prev").on("click",function(){e.trigger("prev.owl.carousel",[700])}),$(".events--next").on("click",function(){e.trigger("next.owl.carousel",[700])})}),$staffOwl.owlCarousel({margin:0,dots:!1,nav:!1,responsive:{0:{items:1},520:{items:2},740:{items:3},1020:{items:4}},lazyLoad:!0});var T=$(".dayinlife__owl");T.on("initialized.owl.carousel resized.owl.carousel",function(){i(".dayinlife__item__bg",function(){$(".dayinlife__item__text").each(function(){{var e;$(this)}e=tabletUp?$(this).outerHeight():"0",$(this).parent().css({"-webkit-transform":"translateY("+e+"px)","-moz-transform":"translateY("+e+"px)",transform:"translateY("+e+"px)"})})})}),T.owlCarousel({margin:0,dots:!1,nav:!1,dragEndSpeed:400,responsive:{0:{autoWidth:!1,items:1},480:{autoWidth:!0}}}),$(".dayinlife--prev").on("click",function(){T.trigger("prev.owl.carousel",[700])}),$(".dayinlife--next").on("click",function(){T.trigger("next.owl.carousel",[700])}),$(".galleries ul").cycle({speed:1e3,timeout:8e3,slides:"> li"})}if($(".menu__btn").click(function(){$(".menu__bar").slideToggle()}),$(".subnav__title").click(function(){tabletUp||($(".subnav__list").slideToggle(),v.animate({scrollTop:$(this).offset().top-20},800))}),$(".accordion__title").on("click",function(){var e=$(this);e.hasClass("open")?e.removeClass("open"):($(".accordion__title").removeClass("open"),e.addClass("open")),$(".accordion__container").slideUp(),e.hasClass("open")?e.next(".accordion__container").slideDown():e.next(".accordion__container").slideUp()}),$(".admin__filepicker").click(function(){var e=$(this).data("folder");window.SetUrl=function(e){$("#links_creator__link").val(e),window.SetUrl=null},window.open("/admin/_includes/filemanager/index.asp?startin="+e,"","resizable=yes,width=960,height=550,menubar=0,toolbar=0,location=0,status=0")}),$(".js-map__toggle").on("click",function(e){tabletUp&&(e.preventDefault(),k||(a(),k=!0),p.toggleClass("mason--map"))}),$(".urgent__close").on("click",function(){p.removeClass("urgent--show");var e=$(this);$.cookie("urgent",e.data("cookie"),{path:"/",expires:3})}),r(),$(".search__input").on("focus",function(){p.addClass("mason--search")}),$(".search__input").on("blur",function(){p.removeClass("mason--search")}),$(".menugrid__admin--delete").on("click",function(){$("#customField_17").val(""),$(".menugrid__admin__img").attr("src","")}),$(document).on("click",".video__play",function(e){e.preventDefault();var t=$(this);s(function(){F.addClass("video--play"),setTimeout(function(){A.html('<iframe width="425" height="349" src="https://www.youtube.com/embed/'+t.data("video")+'?rel=0&autoplay=1&showinfo=0"</iframe>')},500)})}),$(".video__close").on("click",function(e){e.preventDefault(),F.removeClass("video--play"),A.html("")}),w||C){var D=$(".staff__height"),O=$(".staff__item"),V=$(".staff__overlay__owl"),U=$(".staff__overlay__item"),Y=[];staffOverlayContentArray=[],U.each(function(){Y.push($(this))}),c()}$(".staff__item").on("click",function(e){e.preventDefault();var t=$(this),a=t.data("id"),o=(t.data("image"),$(".staff__overlay__item[data-id="+a+"]").parent().index());V.trigger("to.owl.carousel",[o,0]),p.addClass("mason--staff_overlay");var o=t.data("count")-1,t=$(".staff__item ").eq(o),a=t.data("id");f(a)}),$(".staff--prev").on("click",function(){w&&$staffOwl.trigger("prev.owl.carousel",[700]),V.trigger("prev.owl.carousel",[700])}),$(".staff--next").on("click",function(){w&&$staffOwl.trigger("next.owl.carousel",[700]),V.trigger("next.owl.carousel",[700])}),$(".staff__overlay__close").on("click",function(e){e.preventDefault(),p.removeClass("mason--staff_overlay")}),$("#staffFilterSelect").on("change",function(){selectedVal=$(this).val(),$("#customFormField20").val(selectedVal),C&&""!==selectedVal?(O.hide(),O.filter('[data-type="'+selectedVal+'"]').show()):O.show(),d(),$(".nano").nanoScroller({destroy:!0}),V.empty().trigger("destroy.owl.carousel");for(var e=0;e<Y.length;e++){var t=Y[e].data("category");""===selectedVal?V.append(Y[e]):(t==selectedVal||0==selectedVal)&&V.append(Y[e])}c()}),$("#staffSelect").on("change",function(){var e=$(this),t=e.children("option:selected");$("#customField_13").val(t.val()),$("#customField_14").val(t.attr("data-image"))}),n("mason--staff-select","#customField_13","#staffSelect"),runFilterAdmin&&($(".staff__filter").insertAfter($("#customFormField20").parent().parent()),$("#customFormField20").hide(),n("mason--staff-filter","#customFormField20","#staffFilterSelect"))});